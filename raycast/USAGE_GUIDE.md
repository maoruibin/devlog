# devlog + Raycast 完整使用指南

## 🚀 快速开始

### 1. 在 Raycast 中添加脚本

1. 打开 Raycast（`⌘Space`）
2. 输入 `Script Commands`
3. 点击 `+` → `Add Directory`
4. 选择此目录

### 2. 验证安装

在 Raycast 中输入以下命令，确认可以看到：
- `log` → Log Dev Work
- `daily` → Generate Daily Summary
- `view today` → View Today's Dev Log
- `weekly` → Generate Weekly Report

## 📝 功能列表

| 命令 | 功能 | AI 总结 | 复制剪贴板 |
|------|------|---------|-----------|
| `log` | 记录工作 | ❌ | ❌ |
| `view today` | 查看今日日志 | ❌ | ❌ |
| `daily` | 生成日报 | ✅ 自动 | ✅ 自动 |
| `weekly` | 生成周报 | ✅ 自动 | ✅ 自动 |

## 💡 使用示例

### 场景 1：记录工作

**步骤：**
1. 打开 Raycast（`⌘Space`）
2. 输入 `log`
3. 选择分类（如 `🐛 Bug`）
4. 输入标题：`修复登录超时问题`
5. 输入详情：`增加重试机制，优化超时处理`
6. 回车

**结果：**
```
✅ 🐛 BUG: 修复登录超时问题
📄 增加重试机制，优化超时处理
```

### 场景 2：下班前生成日报

**步骤：**
1. 打开 Raycast
2. 输入 `daily`
3. 等待 10-30 秒（AI 生成总结）
4. 自动复制到剪贴板
5. 直接 `⌘V` 粘贴到钉钉/飞书/邮件

**输出示例：**
```
🤖 正在调用 Claude Code 生成 AI 总结...
ℹ️  请稍候，这可能需要 10-30 秒

✨ AI 总结完成！
────────────────────
工作概述：
今日完成 3 项业务需求、2 项 Bug 修复和 1 项技术方案设计...

主要成果：
• 完成用户登录功能，采用 JWT 认证
• 优化首页加载速度，提升 30% 性能
• 修复登录超时问题，增加重试机制

技术亮点：
JWT 认证为后续微服务架构奠定基础...
────────────────────

✅ AI 总结已复制到剪贴板，可直接粘贴使用
```

### 场景 3：周五生成周报

**步骤：**
1. 打开 Raycast
2. 输入 `weekly`
3. （可选）输入天数，如 `14`（默认 7 天）
4. 等待 AI 生成总结
5. 自动复制到剪贴板
6. 粘贴到周会文档

**自定义天数：**
- 默认：最近 7 天
- 输入 `14`：最近 14 天
- 输入 `30`：最近 30 天

### 场景 4：查看今日日志

**步骤：**
1. 打开 Raycast
2. 输入 `view today`
3. 查看原始 Markdown 格式的日志

**输出：**
```markdown
# 📅 2026-01-22 Work Log

### [15:56] `@project` OPS: 部署生产环境
> 完成数据库迁移和服务部署

### [16:30] `@project` BUG: 修复登录问题
> 增加重试机制
```

## 🎯 日常工作流

### 完整工作日流程

**上午 9:00 - 开始工作**
```
Raycast → view today  # 查看昨天的工作，回顾计划
```

**工作中 - 即时记录**
```
完成一个任务：
Raycast → log → 选择分类 → 输入标题和详情

完成另一个任务：
Raycast → log → ...（重复记录）
```

**下午 6:00 - 下班前**
```
Raycast → daily  # 生成 AI 总结 → 自动复制
⌘V  # 粘贴到钉钉/飞书，发送给 leader
```

**周五下午**
```
Raycast → weekly  # 生成周报 → 自动复制
⌘V  # 粘贴到周会文档或邮件
```

## ⚙️ 命令行使用（高级）

如果你更喜欢命令行：

```bash
# 添加别名
echo 'alias dlog="python3 ~/.claude/skills/devlog/devlog.py"' >> ~/.zshrc
source ~/.zshrc

# 使用命令
dlog feat "完成功能" -d "详细说明"
dlog daily --ai --copy
dlog weekly --ai --copy --days 14
```

## 🔧 常用技巧

### 1. 设置 Raycast 快捷键

为常用命令设置全局快捷键：
- `log` → `⌘⌥L`
- `daily` → `⌘⌥D`

**步骤：**
1. Raycast 设置 → Extensions → Script Commands
2. 找到命令 → 点击 → Hotkey → 设置快捷键

### 2. 使用模板记录

保持记录格式一致，AI 总结效果更好：

**Bug 模板：**
```
标题：修复XXX问题
详情：
原因: XXX
方案: XXX
结果: XXX
```

**功能模板：**
```
标题：完成XXX功能
详情：
需求: XXX
实现: XXX
测试: XXX
```

### 3. 分类选择建议

| 分类 | 使用场景 | 示例 |
|------|----------|------|
| 🚨 Incident | 线上故障、紧急问题 | "修复支付服务崩溃" |
| ✨ Feature | 新功能开发 | "完成用户登录功能" |
| 📐 Design | 技术方案、架构设计 | "设计缓存架构方案" |
| 🔧 Ops | 部署、运维、配置 | "部署生产环境" |
| 🐛 Bug | 日常 Bug 修复 | "修复页面加载失败" |
| 📚 Learn | 技术调研、学习 | "调研 Redis 集群方案" |
| 📝 Misc | 其他杂项 | "团队分享会" |

### 4. AI 总结优化

**让 AI 总结更专业：**
1. 记录时包含关键信息（原因、方案、结果）
2. 使用专业术语（如 JWT、Redis、微服务等）
3. 量化成果（如"提升 30% 性能"）

## ⚠️ 注意事项

### AI 总结功能

**需要：**
- Claude Code 已安装（从 https://claude.ai 下载）
- `claude` 命令可用（安装后自动配置）
- 网络连接

**如果没有 Claude Code：**
- 可以只用 `--copy` 参数
- 复制原始内容（不使用 AI）
- 所有其他功能正常使用

### 性能提示

- AI 总结需要 10-30 秒
- 内容越多，时间越长
- 超时设置为 60 秒
- 失败时自动使用原始内容

### 隐私安全

- 敏感信息慎用 AI 总结
- AI 总结仅在本地调用 Claude Code
- 不会发送到外部服务器（除 Claude API）

## 🆘 故障排查

### Raycast 中看不到命令

**解决：**
1. 检查脚本权限：`chmod +x ~/path/to/devlog/*.sh`
2. Raycast → Reload All Commands
3. 重新添加脚本目录

### AI 总结失败

**解决：**
```bash
# 1. 检查 claude 命令
which claude

# 2. 测试 claude
echo "测试" | claude

# 3. 如果命令不存在
# 访问 https://claude.ai 下载 Claude Code
```

### 剪贴板无内容

**解决：**
```bash
# 测试剪贴板
echo "test" | pbcopy
pbpaste

# 如果失败，检查系统权限
# 系统偏好设置 → 安全性与隐私 → 辅助功能
```

### 中文显示乱码

**解决：**
- 已修复！使用 osascript 正确处理 UTF-8
- 如果仍有问题，请反馈

## 📚 更多资源

- **快速开始**：`QUICKSTART.md`
- **AI 功能详解**：`AI_FEATURES.md`
- **Raycast 集成**：`RAYCAST_INTEGRATION.md`
- **完整总结**：`FINAL_SUMMARY.md`

## 🎉 总结

现在你可以：
- ✅ 通过 Raycast 快速记录工作
- ✅ 下班前一键生成 AI 日报并复制
- ✅ 周五一键生成 AI 周报并复制
- ✅ 直接粘贴到钉钉/飞书/邮件/文档
- ✅ 完美支持中文、emoji、特殊字符

**开始使用：**
```
Raycast → log → 开始记录你的第一个任务！
```

---

**版本：** v2.0  
**更新：** 2026-01-22  
**状态：** ✅ 完整功能，可直接使用
